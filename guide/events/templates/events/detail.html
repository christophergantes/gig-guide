{% extends "core/layout.html" %}

{% block head %}
{% comment %} <link 
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
/>
<script 
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin="">
</script> {% endcomment %}
{% endblock head %}

{% block title %}
Event | {{event.title}}
{% endblock title %}

{% block content %}
<h1>Post</h1>
<h2>{{event.title}}</h2>
<p>{{event.content}}</p>

{% if event.image %}
<img src="{{event.image.url}}" alt="event image">
{% endif %}

<div>
    <span>Address: <address>{{event.get_address}}</address></span>
</div>

<h2>Comments</h2>

{% if user.is_authenticated %}
<form action="{% url "comments:post" post_id=event.id %}" method="post">
    {% csrf_token %}
    <label for="">Leave a comment</label>
    <input type="text" name="content">
    <button>Send</button>
</form>
{% endif %}

<ul>
    {% for comment in comments %}
    {% include "comments/comment.html" %}
    {% endfor %}
</ul>

{% comment %} <div>
    <div id="map" style="height: 400px;"></div>
    <script>
        var map = L.map('map').setView([33.968168850305, -83.386537415586], 18);
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);
    </script>
</div> {% endcomment %}
{% endblock content %}